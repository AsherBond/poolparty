module PoolParty
  module Resources
    
    class FileResource < Resource
      
      default_options(
        :content => "# File generated by PoolParty",
        :template => nil,
        :mode => "0644",
        :backup => 5,
        :owner => "root"
      )
      
      def self.has_method_name
        "file"
      end
            
      def print_to_chef        
        <<-EOE
template "<%= name %>" do
  source "<%= name %>.erb"
  action :<%= exists? ? :create : :delete %>
  backup <%= backup %>
  mode <%= print_variable(mode) %>
  owner <%= print_variable(owner) %>
end
        EOE
      end
      
      # A convenience helper to point to the path of the file
      def path
        name
      end
      
    end
    
  end
end