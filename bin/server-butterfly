#!/usr/bin/env ruby
# based on snippet from ciconia
# http://snippets.dzone.com/posts/show/2265

require 'fileutils'
require File.dirname(__FILE__)+'/../vendor/gems/butterfly/lib/butterfly.rb'

monitor_dir = ::File.join(::File.dirname(__FILE__),'..','lib/poolparty/monitors/')
require(::File.join(monitor_dir, 'stats_monitor_adaptor.rb') )
opts ={ :adaptor_opts => {
           :file => ::File.join(monitor_dir, 'stats_monitor_adaptor.rb')},
           :port => PoolParty::Default.butterfly_port
      }

Butterfly::Server.new(opts).start(:daemonize=>true)
