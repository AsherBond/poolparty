#!/usr/bin/ruby
require 'optparse'
$:.unshift(File.join(File.dirname(__FILE__), "..", "lib"))
require "poolparty"

# Get the git-style program name
name = ARGV.shift
program_name = "#{File.basename($0)}-#{name}"
command_line = "#{program_name} #{ARGV.join(" ")}"

# Run it from the command-line first
if !`which #{program_name}`.empty?
  exec "#{command_line}"
elsif(File.file?(File.join(File.dirname(__FILE__), program_name)))
  exec "#{File.join(File.dirname(__FILE__), program_name)} #{ARGV.join(" ")}"
else
  puts "Unknown poolparty binary: #{program_name}"
end